buffers {
  size_kb: 32768
  fill_policy: RING_BUFFER
}

data_sources {
  config {
    name: "linux.ftrace"
    target_buffer: 0
    ftrace_config {
      buffer_size_kb: 512 # 4 (page size) * 128
      drain_period_ms: 100
      ftrace_events: "print"
      ftrace_events: "sched_switch"
    }
  }
}

# data_sources {
#   config {
#     name: "linux.process_stats"
#     target_buffer: 0
#   }
# }

# data_sources {
#   config {
#     name: "linux.inode_file_map"
#     target_buffer: 0
#     inode_file_config {
#       scan_delay_ms: 1000
#       scan_interval_ms: 1000
#       scan_batch_size: 500
#       mount_point_mapping: {
#         mountpoint: "/data"
#         scan_roots: "/data/app"
#         scan_roots: "/data/misc/bootstat"
#         scan_roots: "/data/misc/update_engine_log"
#         scan_roots: "/data/misc/update_engine"
#         scan_roots: "/data/misc/profiles/ref"
#         scan_roots: "/data/misc/profiles/cur"
#         scan_roots: "/data/dalvik-cache"
#         scan_roots: "/data/data/android"
#         scan_roots: "/data/backup"
#       }
#     }
#   }
# }

producers {
  producer_name: "perfetto.traced_probes"
  shm_size_kb: 4096
  page_size_kb: 4
}

duration_ms: 20000
